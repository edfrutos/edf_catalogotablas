{% extends "base.html" %}
{% block title %}Editar tabla{% endblock %}
{% block content %}
<div class="container mt-4">
  <h2>Editar tabla</h2>
  <form method="post">
    <div class="mb-3">
      <label for="nombre" class="form-label">Nombre de la tabla</label>
      <input type="text" class="form-control" id="name" name="name" value="{{ table.name }}" required>
    </div>
    <div class="mb-3">
      <label for="headers" class="form-label">Encabezados (separados por coma)</label>
      <input type="text" class="form-control" id="headers" name="headers" value="{{ table.headers|join(', ') }}" required>
    </div>
    
    <div class="mb-3">
      <label for="miniatura" class="form-label">Imagen de miniatura (URL)</label>
      <input type="text" class="form-control" id="miniatura" name="miniatura" value="{{ table.miniatura or '' }}" placeholder="https://ejemplo.com/imagen.jpg">
      <small class="form-text text-muted">URL de la imagen que aparecerá como miniatura en el dashboard. Si se deja vacío, se usará automáticamente la primera imagen encontrada en las filas.</small>
      {% if table.miniatura %}
        <div class="mt-2">
          <img src="{{ table.miniatura }}" alt="Miniatura actual" style="width:60px; height:60px; object-fit:cover; border-radius:4px; border:1px solid #ddd;">
          <small class="text-muted d-block">Miniatura actual</small>
        </div>
      {% endif %}
    </div>
    <button type="submit" class="btn btn-primary">Guardar cambios</button>
    <a href="{{ url_for('main.ver_tabla', table_id=table._id) }}" class="btn btn-secondary">Cancelar</a>
  </form>
</div>
{% endblock %} 