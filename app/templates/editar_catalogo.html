{% extends "base.html" %}
{% block title %}Editar Catálogo{% endblock %}
{% block content %}
<div class="container mt-4">
    <h1>Editar Catálogo</h1>
    <form method="post">
        <div class="mb-3">
            <label for="name" class="form-label">Nombre del Catálogo</label>
            <input type="text" class="form-control" id="name" name="name" value="{{ catalog.name }}" required>
        </div>
        <div class="mb-3">
            <label for="headers" class="form-label">Encabezados (separados por comas)</label>
            <input type="text" class="form-control" id="headers" name="headers" value="{{ catalog.headers|join(', ') }}" required>
        </div>
        
        <div class="mb-3">
            <label for="miniatura" class="form-label">Imagen de miniatura (URL)</label>
            <input type="text" class="form-control" id="miniatura" name="miniatura" value="{{ catalog.miniatura or '' }}" placeholder="https://ejemplo.com/imagen.jpg">
            <small class="form-text text-muted">URL de la imagen que aparecerá como miniatura en el listado de catálogos. Si se deja vacío, se usará automáticamente la primera imagen encontrada en las filas.</small>
            {% if catalog.miniatura %}
                <div class="mt-2">
                    <img src="{{ catalog.miniatura }}" alt="Miniatura actual" style="width:60px; height:60px; object-fit:cover; border-radius:4px; border:1px solid #ddd;">
                    <small class="text-muted d-block">Miniatura actual</small>
                </div>
            {% endif %}
        </div>
        <button type="submit" class="btn btn-primary">Guardar Cambios</button>
        <a href="{{ url_for('catalogs.view', catalog_id=catalog._id) }}" class="btn btn-secondary">Cancelar</a>
    </form>
</div>
{% endblock %}