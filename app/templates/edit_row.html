{% extends "base.html" %}

{% block title %}Editar Fila - {{ catalog.name }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>Editar Fila en {{ catalog.name }}</h2>
    
    <form method="POST" action="{{ url_for('catalogs.edit_row', catalog_id=catalog._id, row_index=row_index) }}" enctype="multipart/form-data">
        {% for field, value in row_data.items() %}
        {% if field not in ['_id', '_imagenes', 'imagen_urls'] %}
        <div class="form-group mb-3">
            <label for="{{ field }}">{{ field }}</label>
            {% if value is mapping %}
                {% for subfield, subvalue in value.items() %}
                <div class="input-group mb-2">
                    <span class="input-group-text">{{ subfield }}</span>
                    <input type="text" class="form-control" id="{{ field }}_{{ subfield }}" 
                           name="{{ field }}[{{ subfield }}]" value="{{ subvalue }}">
                </div>
                {% endfor %}
            {% else %}
                <input type="text" class="form-control" id="{{ field }}" 
                       name="{{ field }}" value="{{ value }}">
            {% endif %}
        </div>
        {% endif %}
        {% endfor %}

        <div class="mt-4">
            <button type="submit" class="btn btn-primary">Guardar Cambios</button>
            <a href="{{ url_for('catalogs.view_catalog', catalog_id=catalog._id) }}" 
               class="btn btn-secondary">Cancelar</a>
        </div>
    </form>
</div>
{% endblock %}